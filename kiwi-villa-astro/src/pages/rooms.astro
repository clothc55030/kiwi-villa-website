---
import Layout from '../layouts/Layout.astro';
import RoomCard from '../components/RoomCard.astro';
import Lightbox from '../components/Lightbox.astro';
import { getCollection } from 'astro:content';
import { contactInfo } from '../config/social';

const bookingUrl = 'https://booking.owlting.com/kiwi-villa';

// 獲取所有房型資料
const rooms = await getCollection('rooms');
// 按 sortOrder 排序
const sortedRooms = rooms.sort((a, b) => a.data.sortOrder - b.data.sortOrder);

// SEO 和 Meta 資料
const pageTitle = '房型設施 - 澎湖期遇度假會館 | 多種房型選擇，滿足不同需求';
const pageDescription = '澎湖期遇度假會館房型設施，提供豪華家庭房、高級四人房、奢華四人房、高級三人房、高級雙床房、高級雙人房等多種房型選擇。';
const pageKeywords = '澎湖期遇度假會館,房型設施,豪華家庭房,高級四人房,奢華四人房,民宿房型,澎湖住宿';
const canonicalURL = 'https://www.kiwi-villa.com/rooms';
const ogImage = 'https://www.kiwi-villa.com/images/rooms/rooms-og.webp';

// 所有房型的共同設施
const commonAmenities = [
  {
    icon: 'fa6-solid:bath',
    title: 'TOTO衛浴',
    description: '全套TOTO淋浴龍頭、洗臉臺、免治馬桶'
  },
  {
    icon: 'fa6-solid:snowflake',
    title: '大金冷氣',
    description: '隱藏式獨立冷氣，靜音冷房效能'
  },
  {
    icon: 'fa6-solid:droplet',
    title: '軟水系統',
    description: '全屋軟水淨水系統，RO逆滲透飲水'
  },
  {
    icon: 'fa6-solid:wifi',
    title: '高速網路',
    description: '500M頻寬，商用級Ubiquiti設備'
  }
];
---

<Layout 
  title={pageTitle}
  description={pageDescription}
  keywords={pageKeywords}
  canonical={canonicalURL}
  ogImage={ogImage}
  currentPage="/rooms"
>
  <!-- Hero Section -->
  <section class="relative min-h-[70vh] md:min-h-[80vh] flex items-center justify-center overflow-hidden animate-gradient-shift" style="background: linear-gradient(135deg, #7c9bb5 0%, #9bb0c4 25%, #b8c7d6 50%, #a8b8c8 75%, #8fa3b3 100%); background-size: 400% 400%;">
    <!-- Content -->
    <div class="relative z-10 text-center text-white max-w-[600px] px-4 md:px-6 animate-fade-in-up">
      <h1 class="hero-title font-display text-[clamp(2.5rem,5vw,4rem)] font-semibold mb-4 text-shadow-lg">
        房型設施
      </h1>
      <p class="hero-subtitle text-[clamp(1.125rem,2.5vw,1.5rem)] font-light mb-6 text-shadow-md">
        多種房型選擇，滿足不同需求
      </p>
      <div class="max-w-[600px] mx-auto">
        <p class="text-[1.1rem] mb-2 text-shadow-md">
          舒適雅緻的住宿空間，享受澎湖的悠閒時光
        </p>
        <p class="text-[1.1rem] text-shadow-md">
          每個房型都經過精心設計，提供您最完善的設施
        </p>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <main class="bg-white">
    <!-- 房型導覽 -->
    <section class="sticky top-20 z-40 bg-white/95 backdrop-blur-sm border-b border-gray-200 py-4">
      <div class="container mx-auto px-4">
        <nav class="flex gap-2 md:gap-4 overflow-x-auto pb-2 scrollbar-hide">
          {sortedRooms.map((room) => (
            <button
              data-room-nav={room.data.id}
              class="room-nav-btn flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium text-gray-600 hover:text-primary-600 hover:bg-primary-50 transition-all duration-300 whitespace-nowrap"
            >
              {room.data.name}
            </button>
          ))}
        </nav>
      </div>
    </section>

    <!-- 房型展示區 -->
    <section class="py-16 md:py-20">
      <div class="space-y-32">
        {sortedRooms.map((room, index) => (
          <article 
            id={`room-${room.data.id}`} 
            class="room-section"
            data-room-id={room.data.id}
            data-animation-index={index}
          >
            <div class="container mx-auto px-4">
              <div class={`grid lg:grid-cols-2 gap-8 lg:gap-16 items-center ${index % 2 === 1 ? 'lg:grid-flow-col-dense' : ''}`}>
                <!-- 圖片區 -->
                <div class={`room-images ${index % 2 === 1 ? 'lg:col-start-2' : ''}`}>
                  <div class="relative aspect-[4/3] rounded-2xl overflow-hidden shadow-2xl">
                    <img 
                      src={room.data.images[0].src}
                      alt={room.data.images[0].alt}
                      class="w-full h-full object-cover"
                      loading="lazy"
                    />
                    <button 
                      class="absolute inset-0 bg-black/20 hover:bg-black/40 transition-colors duration-300 flex items-center justify-center group"
                      data-room-gallery={room.data.id}
                    >
                      <div class="bg-white/90 backdrop-blur-sm rounded-lg px-6 py-3 flex items-center gap-2 group-hover:scale-105 transition-transform duration-300">
                        <iconify-icon icon="heroicons:photo" class="text-xl"></iconify-icon>
                        <span class="font-medium">查看所有照片</span>
                      </div>
                    </button>
                  </div>
                  <!-- 小圖預覽 -->
                  <div class="grid grid-cols-4 gap-2 mt-4">
                    {room.data.images.slice(1, 5).map((img, imgIndex) => (
                      <button 
                        class="aspect-square rounded-lg overflow-hidden hover:opacity-80 transition-opacity duration-300"
                        data-room-gallery={room.data.id}
                        data-image-index={imgIndex + 1}
                      >
                        <img 
                          src={img.src}
                          alt={img.alt}
                          class="w-full h-full object-cover"
                          loading="lazy"
                        />
                      </button>
                    ))}
                  </div>
                </div>

                <!-- 資訊區 -->
                <div class={`room-info space-y-6 ${index % 2 === 1 ? 'lg:col-start-1' : ''}`}>
                  <div>
                    <h2 class="text-3xl md:text-4xl font-display font-bold text-gray-800 mb-2">
                      {room.data.name}
                    </h2>
                    <p class="text-lg text-gray-600 mb-2">{room.data.nameEn}</p>
                    <div class="flex items-center gap-2">
                      <iconify-icon icon="heroicons:home" class="text-primary-600"></iconify-icon>
                      <span class="text-primary-700 font-medium">房號：{room.data.roomNumbers.join('、')}</span>
                    </div>
                  </div>

                  <div class="flex flex-wrap gap-3">
                    {room.data.features && room.data.features.map((feature) => (
                      <span class="px-4 py-2 bg-primary-50 text-primary-700 rounded-full text-sm font-medium">
                        {feature}
                      </span>
                    ))}
                  </div>

                  <p class="text-gray-700 leading-relaxed">
                    {room.data.description}
                  </p>

                  <!-- 房型特色 -->
                  <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="flex items-center gap-3">
                      <div class="w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center">
                        <iconify-icon icon="heroicons:users" class="text-primary-600"></iconify-icon>
                      </div>
                      <div>
                        <p class="text-sm text-gray-500">可住人數</p>
                        <p class="font-semibold">{room.data.capacity}人</p>
                      </div>
                    </div>
                    <div class="flex items-center gap-3">
                      <div class="w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center">
                        <iconify-icon icon="heroicons:squares-2x2" class="text-primary-600"></iconify-icon>
                      </div>
                      <div>
                        <p class="text-sm text-gray-500">房間大小</p>
                        <p class="font-semibold">{room.data.size}坪</p>
                      </div>
                    </div>
                    <div class="flex items-center gap-3">
                      <div class="w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center">
                        <iconify-icon icon="fa6-solid:bed" class="text-primary-600"></iconify-icon>
                      </div>
                      <div>
                        <p class="text-sm text-gray-500">床型</p>
                        <p class="font-semibold">{room.data.beds[0].type}</p>
                      </div>
                    </div>
                  </div>

                  <!-- 房間設施 -->
                  <div>
                    <h3 class="text-lg font-semibold mb-3">房間設施</h3>
                    <div class="grid grid-cols-2 gap-2">
                      {room.data.facilities && room.data.facilities.slice(0, 6).map((facility) => (
                        <div class="flex items-center gap-2 text-gray-600">
                          <iconify-icon icon="heroicons:check-circle" class="text-primary-500"></iconify-icon>
                          <span class="text-sm">{facility}</span>
                        </div>
                      ))}
                    </div>
                  </div>

                  <!-- 預訂按鈕 -->
                  <div class="pt-6 border-t border-gray-200">
                    <a 
                      href={bookingUrl}
                      class="inline-flex items-center gap-2 px-8 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-all duration-300 font-medium shadow-lg hover:shadow-xl hover:-translate-y-0.5 w-full justify-center"
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      <iconify-icon icon="heroicons:calendar"></iconify-icon>
                      查看房價與預訂
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </article>
        ))}
      </div>
    </section>

    <!-- 共用設施區 -->
    <section class="py-20 bg-gradient-to-b from-gray-50 to-white">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="amenities-title text-3xl md:text-4xl font-display font-bold text-gray-800 mb-4">
            全館共同設施
          </h2>
          <p class="text-lg text-gray-600 max-w-2xl mx-auto">
            我們提供完善的設施，讓您的住宿體驗更加舒適愉快
          </p>
        </div>

        <!-- 設施卡片網格 -->
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
          {commonAmenities.map((amenity, index) => (
            <div 
              class="amenity-card group bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1"
              data-animation-index={index}
            >
              <div class="w-16 h-16 mb-4 bg-gradient-to-br from-primary-100 to-primary-200 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
                <iconify-icon icon={amenity.icon} class="text-2xl text-primary-600"></iconify-icon>
              </div>
              <h3 class="text-xl font-semibold mb-2 text-gray-800">{amenity.title}</h3>
              <p class="text-gray-600 text-sm leading-relaxed">{amenity.description}</p>
            </div>
          ))}
        </div>

        <!-- 額外設施列表 -->
        <div class="mt-16 bg-white rounded-2xl p-8 shadow-lg">
          <h3 class="text-2xl font-semibold mb-6 text-center">其他貼心服務</h3>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
            {[
              '免費停車位',
              '行李寄存服務',
              '旅遊諮詢服務',
              '機車租借代訂',
              '早餐供應',
              '洗衣及烘乾設備',
              '公共休息區',
              '戶外陽台空間',
              '24小時前台服務'
            ].map((service) => (
              <div class="flex items-center gap-2">
                <iconify-icon icon="heroicons:check-badge" class="text-primary-500 text-xl"></iconify-icon>
                <span class="text-gray-700">{service}</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section - 重新設計 -->
    <section class="relative py-24 overflow-hidden">
      <!-- 背景漸層 -->
      <div class="absolute inset-0 bg-gradient-to-br from-primary-600 via-primary-700 to-secondary-700"></div>
      
      <!-- 裝飾圖案 -->
      <div class="absolute inset-0 opacity-10">
        <div class="absolute top-0 left-0 w-96 h-96 bg-white rounded-full -translate-x-1/2 -translate-y-1/2"></div>
        <div class="absolute bottom-0 right-0 w-[30rem] h-[30rem] bg-white rounded-full translate-x-1/2 translate-y-1/2"></div>
      </div>
      
      <!-- 內容 -->
      <div class="relative z-10 container mx-auto px-4">
        <div class="max-w-3xl mx-auto text-center text-white">
          <h2 class="cta-title text-4xl md:text-5xl font-display font-bold mb-6 text-shadow-lg">
            準備好您的澎湖之旅了嗎？
          </h2>
          <p class="cta-subtitle text-xl md:text-2xl mb-12 text-white/90 text-shadow-md">
            選擇您喜愛的房型，享受難忘的海島假期
          </p>
          
          <div class="cta-buttons flex flex-col sm:flex-row gap-4 justify-center">
            <a 
              href={bookingUrl}
              class="group inline-flex items-center justify-center gap-3 px-8 py-4 bg-white text-primary-700 rounded-xl hover:bg-gray-50 transition-all duration-300 font-semibold text-lg shadow-xl hover:shadow-2xl hover:-translate-y-1"
              target="_blank"
              rel="noopener noreferrer"
            >
              <iconify-icon icon="heroicons:calendar" class="text-2xl group-hover:scale-110 transition-transform duration-300"></iconify-icon>
              立即預訂房間
            </a>
            <a 
              href={`tel:${contactInfo.phone}`}
              class="group inline-flex items-center justify-center gap-3 px-8 py-4 bg-white/10 backdrop-blur text-white border-2 border-white/30 rounded-xl hover:bg-white/20 transition-all duration-300 font-semibold text-lg"
            >
              <iconify-icon icon="heroicons:phone" class="text-2xl group-hover:scale-110 transition-transform duration-300"></iconify-icon>
              電話諮詢
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Lightbox -->
  <Lightbox />
</Layout>

<!-- 優化的房間圖片資料管理 -->
<script define:vars={{ roomsData: sortedRooms }}>
  // 使用更有效的方式存儲房間圖片資料
  window.roomImages = {};
  
  // 從 Astro 傳遞的資料初始化
  roomsData.forEach(room => {
    // 保持圖片物件陣列格式，Lightbox 需要 src 和 alt
    window.roomImages[room.data.id] = room.data.images;
  });
</script>

<!-- 房間導航和高亮功能 -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // 房型導覽按鈕功能
    const navButtons = document.querySelectorAll('[data-room-nav]');
    const roomSections = document.querySelectorAll('.room-section');
    
    navButtons.forEach(button => {
      button.addEventListener('click', () => {
        const roomId = button.getAttribute('data-room-nav');
        const targetSection = document.getElementById(`room-${roomId}`);
        
        if (targetSection) {
          const stickyNavHeight = 144; // sticky nav + header
          const targetPosition = targetSection.offsetTop - stickyNavHeight;
          
          window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
          });
        }
      });
    });
    
    // 滾動時更新活動按鈕
    const updateActiveButton = () => {
      const scrollY = window.scrollY;
      const stickyNavHeight = 144;
      
      roomSections.forEach(section => {
        const sectionTop = section.offsetTop - stickyNavHeight - 100;
        const sectionBottom = sectionTop + section.offsetHeight;
        
        if (scrollY >= sectionTop && scrollY < sectionBottom) {
          const roomId = section.getAttribute('data-room-id');
          navButtons.forEach(btn => {
            if (btn.getAttribute('data-room-nav') === roomId) {
              btn.classList.add('bg-primary-100', 'text-primary-700', 'font-semibold');
              btn.classList.remove('text-gray-600');
            } else {
              btn.classList.remove('bg-primary-100', 'text-primary-700', 'font-semibold');
              btn.classList.add('text-gray-600');
            }
          });
        }
      });
    };
    
    // 節流函數
    let ticking = false;
    const scrollHandler = () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          updateActiveButton();
          ticking = false;
        });
        ticking = true;
      }
    };
    
    window.addEventListener('scroll', scrollHandler);
    
    // 圖片畫廊按鈕功能
    const galleryButtons = document.querySelectorAll('[data-room-gallery]');
    
    galleryButtons.forEach(button => {
      button.addEventListener('click', () => {
        const roomId = button.getAttribute('data-room-gallery');
        const imageIndex = button.getAttribute('data-image-index') || '0';
        
        // 觸發 Lightbox
        if (window.openLightbox && window.roomImages[roomId]) {
          window.openLightbox(window.roomImages[roomId], parseInt(imageIndex));
        }
      });
    });
    
    // 檢查 URL 參數（保留原有功能）
    const urlParams = new URLSearchParams(window.location.search);
    const gotoRoom = urlParams.get('goto');
    const hashRoom = window.location.hash.slice(1);
    
    let targetId = '';
    
    if (gotoRoom) {
      targetId = `room-${gotoRoom}`;
    } else if (hashRoom) {
      targetId = hashRoom;
    }
    
    if (targetId) {
      // 處理特殊跳轉規則
      if (targetId === 'room-302') {
        targetId = 'room-301';
      } else if (targetId === 'room-306' || targetId === 'room-307') {
        targetId = 'room-305';
      }
      
      // 延遲執行以確保頁面完全載入
      setTimeout(() => {
        const targetElement = document.getElementById(targetId);
        if (targetElement) {
          // 計算滾動位置（考慮導航列高度）
          const stickyNavHeight = 144;
          const elementTop = targetElement.offsetTop;
          const scrollTo = elementTop - stickyNavHeight;
          
          // 平滑滾動
          window.scrollTo({
            top: scrollTo,
            behavior: 'smooth'
          });
          
          // 更新活動按鈕
          setTimeout(updateActiveButton, 100);
        }
      }, 500);
    }
  });
</script>

<!-- Motion One 動畫 -->
<script>
  // 確保內容在動畫載入前是可見的
  document.addEventListener('DOMContentLoaded', () => {
    // 房間區段總是保持可見
    const roomSections = document.querySelectorAll('.room-section');
    roomSections.forEach(section => {
      section.style.opacity = '1';
    });
    
    // 其他元素根據狀態設置
    const otherElements = document.querySelectorAll('.hero-title, .hero-subtitle, .amenities-title, .amenity-card, .cta-title, .cta-subtitle, .cta-buttons');
    otherElements.forEach(el => {
      if (!el.style.opacity) {
        el.style.opacity = '1';
      }
    });
  });
  
  // 確保 Motion One 載入後再執行動畫
  window.addEventListener('load', async () => {
    try {
      const { animate, stagger } = await import('motion');
      
      // 調試：確認 Motion One 載入成功
      if (import.meta.env.DEV) {
        console.info('Motion One loaded successfully');
      }
      
      // 動畫載入成功後，重置元素狀態準備動畫
      const animatedElements = document.querySelectorAll('.hero-title, .hero-subtitle, .amenities-title, .amenity-card, .cta-title, .cta-subtitle, .cta-buttons');
      animatedElements.forEach(el => {
        el.style.opacity = '0';
      });
      
      // Hero 動畫
      const heroTitle = document.querySelector('.hero-title');
      if (heroTitle) {
        heroTitle.style.opacity = '0';
        animate(heroTitle, 
          { opacity: [0, 1], y: [20, 0] }, 
          { duration: 0.6, easing: 'ease-out' }
        );
      }
      
      const heroSubtitle = document.querySelector('.hero-subtitle');
      if (heroSubtitle) {
        heroSubtitle.style.opacity = '0';
        animate(heroSubtitle, 
          { opacity: [0, 1], y: [20, 0] }, 
          { duration: 0.6, delay: 0.2, easing: 'ease-out' }
        );
      }
      
      // 房間區段動畫
      const roomSections = document.querySelectorAll('.room-section');
      if (roomSections.length > 0) {
        const sectionObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const section = entry.target;
              const images = section.querySelector('.room-images');
              const info = section.querySelector('.room-info');
              
              // 圖片區動畫
              if (images) {
                animate(images,
                  { opacity: [0, 1], x: [-50, 0] },
                  { duration: 0.8, easing: 'ease-out' }
                );
              }
              
              // 資訊區動畫
              if (info) {
                animate(info,
                  { opacity: [0, 1], x: [50, 0] },
                  { duration: 0.8, delay: 0.2, easing: 'ease-out' }
                );
              }
              
              sectionObserver.unobserve(section);
            }
          });
        }, { rootMargin: '0px 0px -100px 0px' });
        
        roomSections.forEach(section => {
          // 設置初始狀態
          const images = section.querySelector('.room-images');
          const info = section.querySelector('.room-info');
          if (images) images.style.opacity = '0';
          if (info) info.style.opacity = '0';
          
          sectionObserver.observe(section);
        });
      }
      
      // 共同設施標題動畫
      const amenitiesTitle = document.querySelector('.amenities-title');
      if (amenitiesTitle) {
        const titleObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              animate(amenitiesTitle, 
                { opacity: [0, 1], y: [30, 0] }, 
                { duration: 0.6, easing: 'ease-out' }
              );
              titleObserver.unobserve(amenitiesTitle);
            }
          });
        });
        titleObserver.observe(amenitiesTitle);
      }
      
      // 設施卡片動畫
      const amenityCards = document.querySelectorAll('.amenity-card');
      if (amenityCards.length > 0) {
        const cardObserver = new IntersectionObserver((entries) => {
          const visibleCards = entries.filter(entry => entry.isIntersecting).map(entry => entry.target);
          
          if (visibleCards.length > 0) {
            animate(visibleCards,
              { opacity: [0, 1], y: [30, 0] },
              { duration: 0.5, delay: stagger(0.1), easing: 'ease-out' }
            );
            
            visibleCards.forEach(card => cardObserver.unobserve(card));
          }
        }, { rootMargin: '0px 0px -100px 0px', threshold: 0.1 });
        
        amenityCards.forEach(card => {
          cardObserver.observe(card);
        });
      }
      
      // CTA 區塊動畫
      const ctaElements = [
        { el: document.querySelector('.cta-title'), animation: { opacity: [0, 1], scale: [0.9, 1] }, delay: 0 },
        { el: document.querySelector('.cta-subtitle'), animation: { opacity: [0, 1], y: [20, 0] }, delay: 0.2 },
        { el: document.querySelector('.cta-buttons'), animation: { opacity: [0, 1], y: [20, 0] }, delay: 0.4 }
      ];
      
      const ctaObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const config = ctaElements.find(item => item.el === entry.target);
            if (config) {
              animate(entry.target, config.animation, {
                duration: 0.6,
                delay: config.delay,
                easing: 'ease-out'
              });
              ctaObserver.unobserve(entry.target);
            }
          }
        });
      });
      
      ctaElements.forEach(({ el }) => {
        if (el) ctaObserver.observe(el);
      });
    } catch (error) {
      console.error('Motion One 載入失敗:', error);
      // 如果動畫失敗，確保所有內容可見
      const allElements = document.querySelectorAll('.hero-title, .hero-subtitle, .amenities-title, .amenity-card, .room-section, .cta-title, .cta-subtitle, .cta-buttons');
      allElements.forEach(el => {
        el.style.opacity = '1';
        el.style.transform = '';
      });
    }
  });
</script>

<style>
  /* 隱藏水平捲軸 */
  :global(.scrollbar-hide) {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  :global(.scrollbar-hide::-webkit-scrollbar) {
    display: none;
  }
  
  /* 初始化隱藏元素（Motion One 會處理顯示） */
  :global(.js .hero-title),
  :global(.js .hero-subtitle),
  :global(.js .amenities-title),
  :global(.js .amenity-card),
  :global(.js .cta-title),
  :global(.js .cta-subtitle),
  :global(.js .cta-buttons) {
    opacity: 0;
  }
  
  /* room-section 使用不同的策略，確保始終可見 */
  :global(.js .room-section) {
    opacity: 1;
  }
  
  /* No-JS 降級方案 - 確保沒有 JavaScript 時內容可見 */
  :global(.no-js .hero-title),
  :global(.no-js .hero-subtitle),
  :global(.no-js .amenities-title),
  :global(.no-js .amenity-card),
  :global(.no-js .room-section),
  :global(.no-js .cta-title),
  :global(.no-js .cta-subtitle),
  :global(.no-js .cta-buttons) {
    opacity: 1;
  }
  
  /* 動畫性能優化 */
  :global(.hero-title),
  :global(.hero-subtitle),
  :global(.amenities-title),
  :global(.amenity-card),
  :global(.room-images),
  :global(.room-info),
  :global(.cta-title),
  :global(.cta-subtitle),
  :global(.cta-buttons) {
    will-change: opacity, transform;
  }
  
  /* 動畫完成後移除 will-change */
  :global(.animation-complete) {
    will-change: auto;
  }
  
  /* 手機版優化 */
  @media (max-width: 768px) {
    /* 減少動畫效果 */
    @media (prefers-reduced-motion: reduce) {
      :global(.hero-title),
      :global(.hero-subtitle),
      :global(.amenities-title),
      :global(.amenity-card),
      :global(.room-section),
      :global(.cta-title),
      :global(.cta-subtitle),
      :global(.cta-buttons) {
        opacity: 1;
        animation: none;
        transition: none;
      }
    }
  }
</style>